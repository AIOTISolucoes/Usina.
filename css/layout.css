/* =============================== 
   LAYOUT BASE & SIDEBAR
================================ */
.layout {
  display: grid;
  grid-template-columns: 72px 1fr;
  min-height: 100vh;

  /* ‚úÖ FIX real: evita ‚Äúcorte‚Äù quando aparece scrollbar (NUNCA use 100vw aqui) */
  width: 100% !important;
  max-width: 100% !important;
}

/* ‚úÖ mant√©m espa√ßo do scrollbar est√°vel (evita shift/corte quando muda de view) */
html { scrollbar-gutter: stable; }

.sidebar {
  position: sticky;
  top: 0;
  height: 100vh;
  z-index: 100;
  background: var(--bg-card);
  border-right: 1px solid var(--border-soft);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 0; /* üîß MENOR */
}

/* ‚úÖ Logo container (funciona tanto com <img> quanto com SVG) */
.sidebar-logo {
  height: 56px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 24px;
}

/* fallback caso ainda use IMG */
.sidebar-logo img {
  width: 40px;
  height: 40px;
  display: block;
  margin: 0 auto;
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.22))
    drop-shadow(0 0 16px rgba(42,255,123,.12));
  opacity: .92;
}

.sidebar-nav {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sidebar-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 20px;
  cursor: pointer;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.3s;
}

.sidebar-btn:hover {
  color: var(--accent-green);
  background: var(--accent-soft);
  box-shadow: 0 0 14px rgba(42, 255, 123, 0.12);
}

.sidebar-btn.active {
  color: var(--accent-green);
  background: var(--accent-soft);
  border: 1px solid rgba(42, 255, 123, 0.65);
  box-shadow:
    0 0 0 1px rgba(42, 255, 123, 0.18) inset,
    0 0 14px rgba(42, 255, 123, 0.18);
}

/* ===============================
   MAIN CONTENT
================================ */
.main {
  display: flex;
  flex-direction: column;

  /* ‚úÖ evita estouro do grid e ‚Äúcorte‚Äù */
  min-width: 0;
  width: 100%;

  height: 100vh;
  background: var(--bg-main);

  /* ‚úÖ scroll s√≥ vertical */
  overflow-y: auto;
  overflow-x: hidden;
}

/* topbar um pouco mais ‚Äúdeep‚Äù */
.topbar {
  height: 60px;
  background: var(--bg-card);
  border-bottom: 1px solid rgba(42, 255, 123, 0.14);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  flex-shrink: 0;
}

.plant-name {
  font-size: 18px;
  font-weight: 500;
  color: var(--text-main);
  text-shadow: 0 0 18px rgba(42, 255, 123, 0.08);
}

.plant-location {
  font-size: 12px;
  color: var(--text-muted);
}

/* ===============================
   PLANT SUMMARY FIXED (TOPO)
   - fundo mais escuro
   - linhas verdes glow (estilo AIOTI)
   - circle % centralizado + glow
   ‚úÖ AJUSTE: conte√∫do centralizado via .psf-inner (fundo continua full width)
================================ */
.plant-summary-fixed {
  /* fundo full-width */
  width: 100% !important;
  box-sizing: border-box;

  background: linear-gradient(
    180deg,
    rgba(5, 7, 10, 0.55),
    rgba(5, 7, 10, 0.15)
  );

  border-bottom: 1px solid rgba(42, 255, 123, 0.16);

  position: relative;
  overflow: hidden;

  /* ‚úÖ padding move pro inner */
  padding: 0 !important;

  /* ‚úÖ mata o flex antigo e evita conflito com regras duplicadas */
  display: block !important;
}

/* linha neon superior */
.plant-summary-fixed::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(42, 255, 123, 0.65),
    transparent
  );
  box-shadow: 0 0 14px rgba(42, 255, 123, 0.35);
  pointer-events: none;
  opacity: 0.95;
}

/* brilho sutil no fundo (n√£o polui) */
.plant-summary-fixed::after {
  content: "";
  position: absolute;
  inset: -40px;
  background:
    radial-gradient(500px 220px at 12% 40%, rgba(42,255,123,.07), transparent 60%),
    radial-gradient(420px 200px at 38% 50%, rgba(42,255,123,.04), transparent 62%),
    radial-gradient(520px 240px at 85% 55%, rgba(42,255,123,.06), transparent 62%);
  pointer-events: none;
  filter: blur(2px);
  opacity: 0.9;
}

.plant-summary-fixed img,
.plant-summary-fixed svg {
  display: block;
}

/* ‚úÖ wrapper interno: centraliza o painel (igual ‚Äúaba principal‚Äù) */
.psf-inner {
  width: 100%;
  max-width: 1180px; /* ajuste fino: 1100‚Äì1300 */
  margin: 0 auto;
  padding: 12px 24px;
  box-sizing: border-box;

  display: grid;
  grid-template-columns: auto auto 1fr auto; /* rated | active | gauge | status */
  align-items: center;
  column-gap: 26px;

  min-height: 94px;
}

/* labels */
.psf-rated,
.psf-active {
  display: flex;
  flex-direction: column;
  gap: 4px;
  position: relative;
}

.psf-rated-label,
.psf-active-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.psf-rated-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--text-main);
}

.psf-active-value {
  font-size: 22px; /* üî• destaque maior */
  font-weight: 800;
  color: var(--accent-green);
  text-shadow: 0 0 12px rgba(42, 255, 123, 0.18);
}

/* gauge */
.psf-gauge {
  display: grid;
  place-items: center;
  width: 100%;
  position: relative;
}

/* circle %: centralizado perfeito + glow */
.psf-gauge-circle {
  width: 88px;
  height: 88px;
  border-radius: 50%;

  display: grid;
  place-items: center;

  border: 3px solid rgba(42, 255, 123, 0.95);

  background: radial-gradient(
    circle at 30% 30%,
    rgba(42, 255, 123, 0.12),
    rgba(0, 0, 0, 0.35)
  );

  color: var(--accent-green);
  font-size: 16px;
  font-weight: 800;

  text-shadow:
    0 0 8px rgba(42, 255, 123, 0.55),
    0 0 16px rgba(42, 255, 123, 0.22);

  box-shadow:
    0 0 0 1px rgba(42, 255, 123, 0.20) inset,
    0 0 10px rgba(42, 255, 123, 0.55),
    0 0 22px rgba(42, 255, 123, 0.25);
}

/* √≠cones status */
.psf-status-icons {
  display: flex;
  align-items: center;
  gap: 18px;
  justify-self: end;
  position: relative;

  /* evita quebrar linha e empurrar layout */
  white-space: nowrap;
}

.psf-status {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #9ae6b4;
  font-size: 13px;
}

.psf-status img {
  width: 18px;
  height: 18px;
  display: block;

  /* ‚úÖ glow mais bonito (pra parecer premium, n√£o emoji) */
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.28))
    drop-shadow(0 0 14px rgba(42,255,123,.16));
  opacity: .95;
}

/* ‚úÖ SVG ‚Äúno comm‚Äù (class no HTML: .psf-no-comm) */
.psf-no-comm {
  width: 18px;
  height: 18px;
  display: block;
  color: var(--accent-green);
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.28))
    drop-shadow(0 0 14px rgba(42,255,123,.16));
  opacity: .95;
}

/* linhas verticais neon entre blocos (as ‚Äúlistras‚Äù) ‚Äî vers√£o correta (sem duplicar com psf-rated) */
.psf-active::before,
.psf-gauge::before,
.psf-status-icons::before {
  content: "";
  position: absolute;
  left: -14px;
  top: 10px;
  bottom: 10px;
  width: 1px;
  background: linear-gradient(
    to bottom,
    transparent,
    rgba(42, 255, 123, 0.55),
    transparent
  );
  box-shadow:
    0 0 10px rgba(42, 255, 123, 0.35),
    0 0 22px rgba(42, 255, 123, 0.16);
  opacity: 0.9;
}

/* precisa de position:relative nos blocos que ganham ::before */
.psf-active,
.psf-gauge,
.psf-status-icons { position: relative; }

/* ===============================
   CONTENT & TABLES (100% WIDTH)
================================ */
.content {
  padding: 24px;
  width: 100% !important;
  max-width: none !important;
  box-sizing: border-box;
}

/* cards um pouco mais ‚Äúdeep‚Äù + borda suave */
.card {
  background: var(--bg-card);
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  margin-bottom: 20px;
  width: 100%;
  box-shadow: 0 0 24px rgba(0,0,0,.25);
}

.card-header {
  padding: 15px 20px;
  border-bottom: 1px solid rgba(42, 255, 123, 0.10);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.portfolio-table,
.alarms-table,
.events-table-full {
  width: 100% !important;
  border-collapse: collapse;
}

th {
  text-align: left;
  padding: 16px 20px;
  color: var(--text-muted);
  font-size: 11px;
  text-transform: uppercase;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  background: var(--bg-card-alt);
}

td {
  padding: 16px 20px;
  color: var(--text-main);
  font-size: 13px;
  border-bottom: 1px solid rgba(255,255,255,0.07);
}

/* ===============================
   INDICADORES DE STATUS (PLANTINHA)
================================ */
.plant-cell {
  position: relative;
  display: flex;
  align-items: center;
  gap: 10px;
  padding-left: 0;
}

.plant-icon {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-right: 0;
  font-size: 16px;
  background: rgba(255, 255, 255, 0.04);
  transition: all 0.25s ease;
}

.plant-icon--ok {
  color: #00e676;
  box-shadow:
    0 0 0 2px rgba(0, 230, 118, 0.35),
    0 0 10px rgba(0, 230, 118, 0.6),
    inset 0 0 6px rgba(0, 230, 118, 0.25);
}

.plant-icon--medium {
  color: #ffeb3b;
  box-shadow:
    0 0 0 2px rgba(255, 235, 59, 0.45),
    0 0 12px rgba(255, 235, 59, 0.8),
    inset 0 0 6px rgba(255, 235, 59, 0.3);
}

.plant-icon--high {
  color: #ff5c5c;
  box-shadow:
    0 0 0 2px rgba(255, 92, 92, 0.5),
    0 0 14px rgba(255, 92, 92, 0.9),
    inset 0 0 6px rgba(255, 92, 92, 0.35);
}

.plant-name-text {
  font-weight: 600;
}


@keyframes alarmRedPulse {
  0%, 100% {
    transform: scale(1);
    box-shadow:
      0 0 0 2px rgba(255, 92, 92, 0.45),
      0 0 10px rgba(255, 92, 92, 0.55),
      inset 0 0 6px rgba(255, 92, 92, 0.28);
    filter: brightness(1);
  }
  50% {
    transform: scale(0.92);
    box-shadow:
      0 0 0 2px rgba(255, 92, 92, 0.72),
      0 0 18px rgba(255, 92, 92, 0.95),
      inset 0 0 10px rgba(255, 92, 92, 0.42);
    filter: brightness(1.08);
  }
}

@keyframes alarmRowPulse {
  0%, 100% {
    box-shadow:
      inset 2px 0 0 rgba(255, 92, 92, 0.55),
      0 0 0 rgba(255, 92, 92, 0);
    background: rgba(255, 92, 92, 0.05);
  }
  50% {
    box-shadow:
      inset 2px 0 0 rgba(255, 92, 92, 0.9),
      0 0 22px rgba(255, 92, 92, 0.22);
    background: rgba(255, 92, 92, 0.12);
  }
}

.portfolio-table td:first-child .plant-cell{
  margin-left: 0;
}


.plant-cell-btn {
  display: inline-flex;
  align-items: center;
  width: 100%;
  margin: 0;
  padding: 0;
  border: 0;
  background: transparent;
  color: inherit;
  cursor: pointer;
  text-align: left;
}

.plant-cell-btn:focus-visible,
.portfolio-row-linkable:focus-visible,
.plant-link-btn:focus-visible {
  outline: 2px solid rgba(42, 255, 123, 0.9);
  outline-offset: 2px;
  border-radius: 8px;
}

.portfolio-row-linkable {
  cursor: pointer;
  transition: background 0.2s ease;
}

.portfolio-row-linkable:hover {
  background: rgba(42, 255, 123, 0.05);
}

.plant-link-btn {
  background: none;
  border: none;
  color: #00e676;
  cursor: pointer;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}


.plant-icon--high {
  animation: alarmRedPulse 1.45s ease-in-out infinite;
}

.alarm-state-pill {
  display: inline-block;
}

.alarms-table tbody tr.alarm-row-attention {
  animation: alarmRowPulse 1.8s ease-in-out infinite;
}

.alarms-table tbody tr.alarm-row-attention--critical,
.alarms-table tbody tr.alarm-row-attention--high {
  border-left: 2px solid rgba(255, 92, 92, 0.8);
}

.alarms-table tbody tr.alarm-row-attention--medium {
  animation-duration: 2.3s;
}

/* ===============================
   ALARM TABS (ESTILIZADOS)
================================ */
.alarms-tabs {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
}

.tab-btn {
  background: var(--bg-card-alt);
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--text-muted);
  padding: 10px 20px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  border-radius: 6px;
  transition: 0.3s;
  text-transform: uppercase;
}

.tab-btn:hover {
  background: var(--accent-soft);
  color: var(--text-main);
  box-shadow: 0 0 16px rgba(42,255,123,.10);
}

.tab-btn.active {
  background: var(--bg-card-alt);
  border-color: rgba(42,255,123,.45);
  color: var(--accent-green);
  box-shadow:
    inset 0 0 10px rgba(42, 255, 123, 0.10),
    0 0 14px rgba(42,255,123,.10);
}

/* ===============================
   EVENTS SCREEN
================================ */
.events-filters-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  padding: 16px;
  background: var(--bg-card-alt);
  border-radius: 8px 8px 0 0;
  align-items: flex-end;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid rgba(255,255,255,0.08);
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.filter-group label {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
}

.filter-group input,
.filter-group select {
  background: var(--bg-card);
  border: 1px solid rgba(255,255,255,0.10);
  color: var(--text-main);
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  outline: none;
}

.filter-group input:focus,
.filter-group select:focus {
  border-color: rgba(42,255,123,.35);
  box-shadow: 0 0 0 3px rgba(42,255,123,.08);
}

.filter-actions {
  display: flex;
  gap: 12px;
  margin-left: auto;
}

.btn-clear {
  background: transparent;
  color: var(--text-muted);
  border: none;
  cursor: pointer;
  font-size: 12px;
}

.btn-apply {
  background: var(--accent-green);
  color: #041008;
  border: none;
  padding: 8px 24px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 800;
  box-shadow:
    0 0 0 1px rgba(0,0,0,.25) inset,
    0 0 16px rgba(42,255,123,.18);
}

/* UTILS */
.hidden { display: none !important; }

/* ===============================
   VIEW TRANSITIONS (dashboard)
================================ */
.view-section{
  will-change: opacity, transform, filter;
}

.view-section.view-enter{
  animation: viewFadeSlideIn .34s cubic-bezier(.22,.61,.36,1);
}

.view-section.view-enter .card,
.view-section.view-enter .events-filters-bar,
.view-section.view-enter .alarms-tabs{
  animation: contentRiseIn .42s cubic-bezier(.22,.61,.36,1);
}

.sidebar-btn,
.tab-btn{
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
}

.sidebar-btn:active,
.tab-btn:active{
  transform: translateY(1px) scale(.985);
}

@keyframes viewFadeSlideIn{
  from{
    opacity: 0;
    transform: translateY(10px);
    filter: blur(2px);
  }
  to{
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

@keyframes contentRiseIn{
  from{
    opacity: 0;
    transform: translateY(12px) scale(.995);
  }
  to{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}


/* ===============================
   PORTFOLIO METRICS (SCADA GLOW)
================================ */
.metric-neutral {
  color: var(--text-main);
  font-weight: 500;
}

.metric-active {
  color: #39e58c;
  font-weight: 700;
  text-shadow:
    0 0 6px rgba(57, 229, 140, 0.45),
    0 0 12px rgba(57, 229, 140, 0.35);
}

/* ===============================
   AIOTI ‚Äî BREATHING GLOW (sutil)
================================ */
@keyframes glowBreathGreen {
  0%, 100% {
    box-shadow:
      0 0 0 1px rgba(42,255,123,.18) inset,
      0 0 10px rgba(42,255,123,.28),
      0 0 22px rgba(42,255,123,.12);
    filter: drop-shadow(0 0 6px rgba(42,255,123,.18));
  }
  50% {
    box-shadow:
      0 0 0 1px rgba(42,255,123,.26) inset,
      0 0 14px rgba(42,255,123,.48),
      0 0 34px rgba(42,255,123,.18);
    filter: drop-shadow(0 0 10px rgba(42,255,123,.32));
  }
}

.psf-gauge-circle{
  animation: glowBreathGreen 2.8s ease-in-out infinite !important;
  transform: none !important;
}

@keyframes lineBreath {
  0%,100% { opacity: .55; filter: drop-shadow(0 0 6px rgba(42,255,123,.16)); }
  50%     { opacity: .95; filter: drop-shadow(0 0 12px rgba(42,255,123,.30)); }
}

.plant-summary-fixed::before{
  animation: lineBreath 3.6s ease-in-out infinite !important;
}

.psf-active::before,
.psf-gauge::before,
.psf-status-icons::before{
  animation: lineBreath 3.2s ease-in-out infinite !important;
}

/* Acessibilidade: se reduzir movimento, desliga */
@media (prefers-reduced-motion: reduce){
  .psf-gauge-circle,
  .plant-summary-fixed::before,
  .psf-active::before,
  .psf-gauge::before,
  .psf-status-icons::before,
  .plant-icon--ok,
  .plant-icon--medium,
  .plant-icon--high,
  .view-section.view-enter,
  .view-section.view-enter .card,
  .view-section.view-enter .events-filters-bar,
  .view-section.view-enter .alarms-tabs,
  .alarms-table tbody tr.alarm-row-attention,
  .alarm-state-pill{
    animation: none !important;
  }
}

/* ===============================
   AIOTI TRIANGLE LOGO (SVG) ‚Äî FIX ‚Äúpreto‚Äù
================================ */
.aioti-logo{
  width: 100%;
  display: grid;
  place-items: center;
}

.aioti-mark{
  width: 40px;
  height: 40px;
  display: block;
  overflow: visible;

  /* glow igual ao resto do seu tema */
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.28))
    drop-shadow(0 0 16px rgba(42,255,123,.14));
}

/* Contorno verde */
.aioti-mark .aioti-outline{
  fill: none;
  stroke: var(--accent-green);
  stroke-width: 10;
  stroke-linejoin: round;
  stroke-linecap: round;
  opacity: .95;
}

/* ‚ÄúFuro‚Äù interno (usa a cor do card/sidebar) */
.aioti-mark .aioti-cut{
  fill: none;
  stroke: var(--bg-card);
  stroke-width: 14;
  stroke-linejoin: round;
  stroke-linecap: round;
  opacity: 1;
}

/* ===============================
   FIX: TOP SUMMARY SEM SUMIR + STICKY NO SCROLL
   (cola no FINAL do layout.css)
================================ */

/* 1) a √°rea que rola √© .main (j√° √©), ent√£o sticky funciona aqui */
.main{
  position: relative;     /* cria contexto pro z-index */
  overflow-y: auto;
  overflow-x: hidden;
}

/* 2) topbar fica grudada no topo */
.topbar{
  position: sticky;
  top: 0;
  z-index: 300;
  background: var(--bg-card); /* garante que n√£o ‚Äúsome‚Äù por transpar√™ncia */
}

/* 3) resumo fica grudado logo abaixo da topbar */
.plant-summary-fixed{
  position: sticky;
  top: 60px;              /* mesma altura da topbar */
  z-index: 250;
  background: linear-gradient(
    180deg,
    rgba(5, 7, 10, 0.92),
    rgba(5, 7, 10, 0.55)
  );
  backdrop-filter: blur(6px);
}

/* 4) o brilho/linhas do resumo n√£o podem pegar clique nem estourar */
.plant-summary-fixed::before,
.plant-summary-fixed::after{
  pointer-events: none;
}

/* 5) evita a tabela ‚Äúpassar por cima‚Äù do resumo */
.content{
  position: relative;
  z-index: 1;
}

/* 6) opcional: quando o resumo fica sticky, d√° uma borda/linha mais forte */
.plant-summary-fixed{
  box-shadow:
    0 10px 24px rgba(0,0,0,.35);
}

/* ===============================
   TOP SUMMARY ‚Äî STATUS ICONS (FIX)
   Gen | No comm | Off alinhados na mesma faixa
================================ */

/* container da direita */
.psf-status-icons{
  display: flex !important;
  align-items: center;
  justify-content: flex-end;
  gap: 12px;               /* espa√ßo entre chips */
  white-space: nowrap;
}

/* cada item vira um ‚Äúchip‚Äù */
.psf-status{
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  gap: 8px;

  height: 36px;
  padding: 0 6px;
  border-radius: 0;

  background: transparent;
  border: none;
  box-shadow: none;

  color: var(--accent-green);
  font-size: 13px;
}

/* √≠cones IMG (gen/off) */
.psf-status img{
  width: 18px;
  height: 18px;
  display: block;
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.28))
    drop-shadow(0 0 14px rgba(42,255,123,.16));
  opacity: .95;
}

/* √≠cone SVG do no comm */
.psf-no-comm{
  width: 18px;
  height: 18px;
  display: block;
  color: var(--accent-green);
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.28))
    drop-shadow(0 0 14px rgba(42,255,123,.16));
  opacity: .95;
}

.psf-off-icon{
  width: 18px;
  height: 18px;
  display: block;
  color: var(--accent-green);
  filter:
    drop-shadow(0 0 6px rgba(42,255,123,.28))
    drop-shadow(0 0 14px rgba(42,255,123,.16));
  opacity: .95;
}

/* opcional: n√∫meros mais ‚Äúfirmes‚Äù */
.psf-status span span{
  font-weight: 700;
  margin-left: 2px;
}

/* ===============================
   RESPONSIVO (PC + TABLET + MOBILE)
================================ */

/* Laptop menor / tablet landscape */
@media (max-width: 1200px){
  .content{ padding: 16px; }

  .psf-inner{
    max-width: 100%;
    grid-template-columns: auto auto 1fr;
    grid-template-areas:
      "rated active gauge"
      "status status status";
    row-gap: 12px;
    column-gap: 16px;
    padding: 12px 16px;
    min-height: unset;
  }

  .psf-rated{ grid-area: rated; }
  .psf-active{ grid-area: active; }
  .psf-gauge{ grid-area: gauge; justify-self: end; }
  .psf-status-icons{
    grid-area: status;
    justify-self: start;
    justify-content: flex-start;
    flex-wrap: wrap;
    white-space: normal;
    gap: 10px;
  }

  .events-filters-bar{ gap: 10px; }
  .filter-group input,
  .filter-group select{ min-width: 140px; }
}

/* Tablet portrait */
@media (max-width: 900px){
  .layout{
    grid-template-columns: 60px 1fr;
  }

  .sidebar{
    padding: 10px 0;
  }

  .sidebar-logo{
    height: 44px;
    margin-bottom: 14px;
  }

  .sidebar-btn{
    width: 40px;
    height: 40px;
    font-size: 18px;
  }

  .topbar{
    height: 56px;
    padding: 0 12px;
  }

  .plant-name{ font-size: 16px; }

  .topbar-right{ gap: 8px; }
  .user-pill{ padding: 4px 8px; }

  .plant-summary-fixed{ top: 56px; }

  .psf-inner{
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "rated active"
      "gauge gauge"
      "status status";
    row-gap: 10px;
    padding: 10px 12px;
  }

  .psf-gauge{ justify-self: center; }

  .psf-gauge-circle{
    width: 74px;
    height: 74px;
    font-size: 14px;
  }

  .psf-rated-value{ font-size: 16px; }
  .psf-active-value{ font-size: 18px; }

  .psf-active::before,
  .psf-gauge::before,
  .psf-status-icons::before{ display:none; }

  .content{ padding: 12px; }

  .card-header,
  th,
  td{ padding: 12px; }

  .events-filters-bar{
    padding: 12px;
    border-radius: 8px;
  }

  .filter-actions{
    margin-left: 0;
    width: 100%;
    justify-content: flex-end;
  }

  .alarms-table-wrapper,
  .events-table-wrapper-full,
  .portfolio-table-wrapper{
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .portfolio-table,
  .alarms-table,
  .events-table-full{
    min-width: 760px;
  }
}

/* Mobile (iPhone/Android) */
@media (max-width: 640px){
  .layout{
    grid-template-columns: 1fr;
    min-height: 100dvh;
  }

  .sidebar{
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    top: auto;
    height: 64px;
    z-index: 400;

    border-right: none;
    border-top: 1px solid var(--border-soft);

    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
  }

  .sidebar-logo{
    width: 40px;
    height: 40px;
    margin: 0;
  }

  .sidebar-nav{
    flex: 0;
    flex-direction: row;
    justify-content: center;
    gap: 10px;
  }

  .sidebar-bottom{
    margin-top: 0;
    padding-bottom: 0;
    flex-direction: row;
    gap: 8px;
  }

  .main{
    height: auto;
    min-height: 100dvh;
    padding-bottom: 74px; /* espa√ßo da barra inferior */
  }

  .topbar{
    height: auto;
    min-height: 52px;
    padding: 8px 10px;
    gap: 8px;
    flex-wrap: wrap;
  }

  .topbar-right{
    width: 100%;
    justify-content: center;
    gap: 10px;
  }

  .status-pill,
  .user-pill{ font-size: 10px; }

  .plant-summary-fixed{
    position: sticky;
    top: 0;
  }

  .psf-inner{
    grid-template-columns: 1fr;
    grid-template-areas:
      "rated"
      "active"
      "gauge"
      "status";
    text-align: center;
    padding: 10px;
    justify-items: center;
  }

  .psf-rated,
  .psf-active,
  .psf-gauge,
  .psf-status-icons{
    justify-self: center;
    width: 100%;
  }

  .psf-gauge{
    display: grid;
    place-items: center;
  }

  .psf-status-icons{
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
  }

  .psf-status{
    height: auto;
    padding: 0 4px;
    font-size: 12px;
    border: none;
    box-shadow: none;
  }

  .content{ padding: 10px; }

  .card{ border-radius: 10px; }

  .tab-btn{
    padding: 8px 10px;
    font-size: 11px;
  }

  .events-filters-bar{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    align-items: end;
  }

  .filter-group{ min-width: 0; }

  .filter-group input,
  .filter-group select{
    width: 100%;
    min-width: 0;
  }

  .filter-actions{
    grid-column: 1 / -1;
    justify-content: stretch;
    gap: 8px;
  }

  .btn-clear,
  .btn-apply{
    flex: 1;
    min-height: 36px;
  }
}

/* ===============================
   MOBILE UX ‚Äî centraliza√ß√£o + tabelas completas (alarms/events)
================================ */
@media (max-width: 640px){
  .topbar,
  .topbar-right,
  .content,
  .card-header,
  .alarms-tabs{
    justify-content: center;
    text-align: center;
  }

  .plant-name,
  .plant-location,
  .card-title{
    text-align: center;
    width: 100%;
  }

  .events-container-full,
  .alarms-container,
  .card{
    margin-left: auto;
    margin-right: auto;
  }

  #eventsView .events-filters-bar{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    align-items: end;
    padding: 10px;
    position: sticky;
    top: 6px;
    z-index: 20;
    background: rgba(5, 19, 14, 0.95);
    border-radius: 10px;
  }

  #eventsView .filter-group{
    min-width: 0;
  }

  #eventsView .filter-group input,
  #eventsView .filter-group select{
    width: 100%;
    min-width: 0;
  }

  #eventsView .filter-actions{
    grid-column: 1 / -1;
    display: flex;
    justify-content: stretch;
    gap: 8px;
    margin-left: 0;
  }

  #eventsView .btn-clear,
  #eventsView .btn-apply{
    flex: 1;
    min-height: 38px;
  }

  .alarms-tabs{
    display: flex;
    flex-wrap: nowrap;
    gap: 8px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 4px;
  }

  .alarms-tabs .tab-btn{
    flex: 0 0 auto;
  }

  .alarms-table-wrapper,
  .events-table-wrapper-full,
  .portfolio-table-wrapper{
    position: relative;
    overflow-x: auto;
    overscroll-behavior-x: contain;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }

   .portfolio-table-wrapper::after{
    content: "‚Üê arraste para ver mais ‚Üí";
    display: block;
    text-align: center;
    font-size: 11px;
    color: var(--text-muted);
    padding: 6px 0 2px;
  }

  .portfolio-table,
  .alarms-table,
  .events-table-full{
    min-width: 860px;
  }

  /* Alarmes/Eventos no celular em layout leg√≠vel (sem corte de descri√ß√£o) */
  .alarms-table,
  .events-table-full{
    min-width: 0;
    width: 100% !important;
    border-collapse: separate;
    border-spacing: 0 10px;
  }

  .alarms-table thead,
  .events-table-full thead{
    display: none;
  }

  .alarms-table tbody tr,
  .events-table-full tbody tr{
    display: block;
    background: rgba(10, 24, 19, 0.92);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    padding: 10px;
    margin-bottom: 10px;
  }

  .alarms-table tbody td,
  .events-table-full tbody td{
    display: grid;
    grid-template-columns: 100px 1fr;
    gap: 8px;
    align-items: start;
    padding: 6px 2px;
    border-bottom: 1px dashed rgba(255,255,255,0.08);
    white-space: normal;
    word-break: break-word;
    overflow-wrap: anywhere;
    font-size: 12px;
  }

  .alarms-table tbody td:last-child,
  .events-table-full tbody td:last-child{
    border-bottom: 0;
  }

  .alarms-table tbody td::before,
  .events-table-full tbody td::before{
    color: var(--text-muted);
    font-weight: 700;
    text-transform: uppercase;
    font-size: 10px;
    letter-spacing: 0.04em;
    content: attr(data-label);
  }

  .alarms-table tbody td:nth-child(1)::before{ content: "Pathname"; }
  .alarms-table tbody td:nth-child(2)::before{ content: "Description"; }
  .alarms-table tbody td:nth-child(3)::before{ content: "State"; }
  .alarms-table tbody td:nth-child(4)::before{ content: "Timestamp"; }

  .events-table-full tbody td:nth-child(1)::before{ content: "Timestamp"; }
  .events-table-full tbody td:nth-child(2)::before{ content: "Point"; }
  .events-table-full tbody td:nth-child(3)::before{ content: "Equipment"; }
  .events-table-full tbody td:nth-child(4)::before{ content: "Description"; }
  .events-table-full tbody td:nth-child(5)::before{ content: "State"; }
  .events-table-full tbody td:nth-child(6)::before{ content: "Severity"; }

  .alarms-table-wrapper,
  .events-table-wrapper-full{
    overflow-x: visible;
  }

  .portfolio-table th,
  .portfolio-table td{
    padding: 14px 12px;
    font-size: 12px;
    white-space: nowrap;
  }

  .portfolio-table th:first-child,
  .portfolio-table td:first-child{
    position: sticky;
    left: 0;
    z-index: 2;
    background: #03110d;
  }

  .portfolio-table th:first-child{ z-index: 3; }

  .plant-link-btn{
    width: 40px;
    height: 40px;
  }

  .plant-cell{
    min-width: 160px;
  }
}
